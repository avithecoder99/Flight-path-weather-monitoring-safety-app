<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Flight Path Safety</title>
  <link rel="stylesheet" href="/static/style.css"/>
</head>
<body>
<<<<<<< HEAD
  <div class="container">
    <h1>✈️ Flight Path Safety</h1>
    <p class="sub">Check route safety & nearest cities along the path.</p>

    <div class="form">
      <div class="field">
        <label>Departure (city or airport)</label>
        <input id="departure" placeholder="e.g., London">
      </div>
      <div class="field">
        <label>Arrival (city or airport)</label>
        <input id="arrival" placeholder="e.g., Tokyo">
      </div>
      <!-- Prevents default submit/reload -->
      <button id="runBtn" type="button">Analyze Route</button>
      <!--<small class="hint">Server must have <code>OPENWEATHER_API_KEY</code> set.</small>-->
    </div>

    <div id="alert" class="alert" style="display:none;"></div>

    <div id="plotWrap" class="plot" style="display:none;">
      <img id="plot" alt="Route Plot"/>
    </div>

    <div id="tableWrap" style="display:none;">
      <h2>Waypoints</h2>
      <table id="results">
        <thead>
          <tr>
            <th>#</th><th>Nearest City</th><th>Safety</th>
            <th>Temp (°C)</th><th>Wind (m/s)</th><th>Condition</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!--<footer>Built for Azure App Service • FastAPI</footer>-->
  </div>
  <script src="/static/app.js"></script>
=======
  <main class="page">
    <header class="hero">
      <h1>✈️ Flight Path Safety</h1>
      <p class="muted">Check route safety & nearest cities along the path.</p>
    </header>

    <!-- Sticky form stays visible while scrolling -->
    <section class="card form-card">
      <form action="/analyze" method="post" class="grid">
        <div class="field">
          <label for="departure">Departure (city or airport)</label>
          <input id="departure" name="departure" value="{{ form_departure }}" placeholder="e.g., London" required>
        </div>

        <div class="field">
          <label for="arrival">Arrival (city or airport)</label>
          <input id="arrival" name="arrival" value="{{ form_arrival }}" placeholder="e.g., Tokyo" required>
        </div>

        <div class="actions">
          <button type="submit" class="btn">Analyze Route</button>
        </div>
      </form>

      <p class="hint">Tip: Results render below and the inputs remain here for quick re-checks.</p>
    </section>

    <!-- Error (if any) -->
    {% if error %}
    <section class="card alert">
      <strong>Oops:</strong> {{ error }}
    </section>
    {% endif %}

    <!-- Results -->
    {% if result %}
      {% set alert = result.alert %}
      {% set plot = result.plot %}
      {% set rows = result.rows %}
      {% set departure = result.departure %}
      {% set arrival = result.arrival %}

      <section class="card">
        <h2 class="tight">Route</h2>
        <p class="muted">From <strong>{{ departure }}</strong> to <strong>{{ arrival }}</strong></p>
        {% if alert %}
          <div class="pill">{{ alert }}</div>
        {% endif %}
      </section>

      {% if plot %}
      <section class="card">
        <img class="plot" src="{{ plot }}" alt="Route plot">
      </section>
      {% endif %}

      {% if rows and rows|length > 0 %}
      <section class="card">
        <h2 class="tight">Waypoints</h2>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>#</th>
                <th>Nearest City</th>
                <th>Safety</th>
                <th>Temp (°C)</th>
                <th>Wind (m/s)</th>
                <th>Condition</th>
              </tr>
            </thead>
            <tbody>
              {% for r in rows %}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ r.nearest_city or "" }}</td>
                <td class="{% if r.safety == 'Safe to continue' %}ok{% elif r.safety == 'Unsafe to continue' %}bad{% endif %}">
                  {{ r.safety }}
                </td>
                <td>{{ r.temp_c if r.temp_c is not none else "" }}</td>
                <td>{{ r.wind_ms if r.wind_ms is not none else "" }}</td>
                <td>{{ r.condition or "" }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
      {% endif %}
    {% endif %}

    <footer class="foot muted">Server-rendered • No JavaScript needed</footer>
  </main>
>>>>>>> ac2cfa8 (final commit - updated code)
</body>
</html>
